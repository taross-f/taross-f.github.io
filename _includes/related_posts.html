<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    {% assign max_related = 3 %} {% assign min_common_tags = 1 %} {% assign
    max_related_counter = 0 %} {% for post in site.posts %} {% assign
    same_tag_count = 0 %} {% for tag in post.tags %} {% if post.url != page.url
    %} {% if page.tags contains tag %} {% assign same_tag_count = same_tag_count
    | plus: 1 %} {% endif %} {% endif %} {% endfor %} {% if same_tag_count >=
    min_common_tags %}
    <li>
      <h6 style="float: left;">
        <a href="{{ post.url }}">
          {{ post.title }}
        </a>
      </h6>
      <small class="date">{{ post.date | date_to_string }}</small>
    </li>
    {% assign max_related_counter = max_related_counter | plus: 1 %} {% if
    max_related_counter >= max_related %} {% break %} {% endif %} {% endif %} {%
    endfor %}
  </ul>
</div>
