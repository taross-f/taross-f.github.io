---
layout: page
title: CSSåœ§ç¸®ãƒ„ãƒ¼ãƒ«
permalink: /css-compressor/
lang: ja
---

<div class="css-compressor">
  <div class="tool-section">
    <h3>ğŸ“ CSSå…¥åŠ›</h3>
    <textarea id="cssInput" placeholder="åœ§ç¸®ã™ã‚‹CSSã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...

ä¾‹:
body {
  margin: 0;
  padding: 20px;
  font-family: Arial, sans-serif;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  background-color: #ffffff;
}" rows="15"></textarea>
    <div class="button-group">
      <button id="compressBtn" class="btn btn-primary">CSSåœ§ç¸®</button>
      <button id="clearInputBtn" class="btn">å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢</button>
    </div>
  </div>
  
  <div class="tool-section">
    <h3>âš™ï¸ åœ§ç¸®ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h3>
    <div class="options-grid">
      <div class="option-item">
        <label for="compressionLevel">åœ§ç¸®ãƒ¬ãƒ™ãƒ«:</label>
        <select id="compressionLevel">
          <option value="1">ãƒ¬ãƒ™ãƒ«1 (åŸºæœ¬)</option>
          <option value="2" selected>ãƒ¬ãƒ™ãƒ«2 (æ¨å¥¨)</option>
        </select>
      </div>
      <div class="option-item">
        <label>
          <input type="checkbox" id="keepBreaks"> æ”¹è¡Œã‚’ä¿æŒ
        </label>
      </div>
      <div class="option-item">
        <label>
          <input type="checkbox" id="removeComments" checked> ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤
        </label>
      </div>
      <div class="option-item">
        <label>
          <input type="checkbox" id="removeEmpty" checked> ç©ºã®ãƒ«ãƒ¼ãƒ«ã‚’å‰Šé™¤
        </label>
      </div>
    </div>
  </div>
  
  <div class="tool-section">
    <h3>ğŸ“Š åœ§ç¸®çµ±è¨ˆ</h3>
    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-label">å…ƒã®ã‚µã‚¤ã‚º</span>
        <span class="stat-value" id="originalSize">0 B</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">åœ§ç¸®å¾Œã‚µã‚¤ã‚º</span>
        <span class="stat-value" id="compressedSize">0 B</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">å‰Šæ¸›ã‚µã‚¤ã‚º</span>
        <span class="stat-value" id="savedSize">0 B</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">åœ§ç¸®ç‡</span>
        <span class="stat-value" id="compressionRatio">0%</span>
      </div>
    </div>
  </div>
  
  <div class="tool-section">
    <h3>ğŸ“¤ åœ§ç¸®çµæœ</h3>
    <textarea id="cssOutput" placeholder="åœ§ç¸®ã•ã‚ŒãŸCSSãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™..." rows="15" readonly></textarea>
    <div class="button-group">
      <button id="copyResultBtn" class="btn">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
      <button id="clearResultBtn" class="btn">çµæœã‚’ã‚¯ãƒªã‚¢</button>
      <button id="downloadBtn" class="btn">CSSãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
    </div>
  </div>
  
  <div class="info-section">
    <h4>ğŸ’¡ CSSåœ§ç¸®ã«ã¤ã„ã¦</h4>
    <p>CSSåœ§ç¸®ã¯ã€ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’å°ã•ãã—ã¦Webã‚µã‚¤ãƒˆã®èª­ã¿è¾¼ã¿é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã‚‹æŠ€è¡“ã§ã™ã€‚</p>
    <div class="css-info">
      <p><strong>åœ§ç¸®å†…å®¹:</strong></p>
      <ul>
        <li><strong>ç©ºç™½ãƒ»æ”¹è¡Œå‰Šé™¤:</strong> ä¸è¦ãªç©ºç™½æ–‡å­—ã‚’é™¤å»</li>
        <li><strong>ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤:</strong> é–‹ç™ºç”¨ã‚³ãƒ¡ãƒ³ãƒˆã‚’é™¤å»</li>
        <li><strong>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£æœ€é©åŒ–:</strong> å†—é•·ãªãƒ«ãƒ¼ãƒ«ã®çµ±åˆ</li>
        <li><strong>å€¤ã®çŸ­ç¸®:</strong> è‰²ã‚³ãƒ¼ãƒ‰ã‚„å˜ä½ã®æœ€é©åŒ–</li>
      </ul>
      <p><strong>ãƒ¡ãƒªãƒƒãƒˆ:</strong> ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºå‰Šæ¸›ã€ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é€Ÿåº¦å‘ä¸Šã€å¸¯åŸŸå¹…ã®ç¯€ç´„</p>
    </div>
  </div>
</div>

<script>
// CSSåœ§ç¸®ã®ç´”ç²‹ãªJavaScriptå®Ÿè£…
function initCSSCompressor() {

  const cssInput = document.getElementById('cssInput');
  const cssOutput = document.getElementById('cssOutput');
  const compressBtn = document.getElementById('compressBtn');
  const copyResultBtn = document.getElementById('copyResultBtn');
  const clearInputBtn = document.getElementById('clearInputBtn');
  const clearResultBtn = document.getElementById('clearResultBtn');
  const downloadBtn = document.getElementById('downloadBtn');
  
  const compressionLevel = document.getElementById('compressionLevel');
  const keepBreaks = document.getElementById('keepBreaks');
  const removeComments = document.getElementById('removeComments');
  const removeEmpty = document.getElementById('removeEmpty');
  
  const originalSize = document.getElementById('originalSize');
  const compressedSize = document.getElementById('compressedSize');
  const savedSize = document.getElementById('savedSize');
  const compressionRatio = document.getElementById('compressionRatio');

  function formatBytes(bytes) {
    if (bytes === 0) return '0 B';
    const k = 1024;
    const sizes = ['B', 'KB', 'MB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  }

  function updateStats(originalText, compressedText) {
    const originalBytes = new Blob([originalText]).size;
    const compressedBytes = new Blob([compressedText]).size;
    const savedBytes = originalBytes - compressedBytes;
    const ratio = originalBytes > 0 ? Math.round((savedBytes / originalBytes) * 100) : 0;
    
    originalSize.textContent = formatBytes(originalBytes);
    compressedSize.textContent = formatBytes(compressedBytes);
    savedSize.textContent = formatBytes(savedBytes);
    compressionRatio.textContent = ratio + '%';
  }

  function showMessage(element, message, type = 'success') {
    const existingMsg = element.parentNode.querySelector('.error, .success');
    if (existingMsg) {
      existingMsg.remove();
    }
    
    const msgDiv = document.createElement('div');
    msgDiv.className = type;
    msgDiv.textContent = message;
    element.parentNode.appendChild(msgDiv);
    
    setTimeout(() => {
      if (msgDiv.parentNode) {
        msgDiv.remove();
      }
    }, 3000);
  }

  // CSSåœ§ç¸®ã®JavaScriptå®Ÿè£…
  function minifyCSS(css, options = {}) {
    const level = options.level || 2;
    const keepBreaks = options.keepBreaks || false;
    const removeComments = options.removeComments !== false;
    const removeEmpty = options.removeEmpty !== false;
    
    let result = css;
    
    // ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤
    if (removeComments) {
      result = result.replace(/\/\*[^*]*\*+(?:[^/*][^*]*\*+)*\//g, '');
    }
    
    // æ”¹è¡Œã¨ä½™åˆ†ãªç©ºç™½ã®å‡¦ç†
    if (!keepBreaks) {
      // æ”¹è¡Œã‚’å‰Šé™¤
      result = result.replace(/\r?\n/g, ' ');
    }
    
    // è¤‡æ•°ã®ç©ºç™½ã‚’1ã¤ã«
    result = result.replace(/\s+/g, ' ');
    
    // ã‚»ãƒ¬ã‚¯ã‚¿å‰å¾Œã®ç©ºç™½ã‚’å‰Šé™¤
    result = result.replace(/\s*([{}:;,])\s*/g, '$1');
    
    // 0pxã‚’0ã«å¤‰æ›
    result = result.replace(/([^\d]|^)0(px|em|%|in|cm|mm|pc|pt|ex)/g, '$10');
    
    // ãƒ¬ãƒ™ãƒ«2ã®æœ€é©åŒ–
    if (level >= 2) {
      // è‰²ã®æœ€é©åŒ–
      result = result.replace(/#([0-9a-f])\1([0-9a-f])\2([0-9a-f])\3/gi, '#$1$2$3');
      
      // font-weightã®æœ€é©åŒ–
      result = result.replace(/font-weight:\s*normal/g, 'font-weight:400');
      result = result.replace(/font-weight:\s*bold/g, 'font-weight:700');
      
      // margin/paddingã®çŸ­ç¸®å½¢
      result = result.replace(/(margin|padding):([^;]+)([^;]+)\2\3;/g, '$1:$2;');
      result = result.replace(/(margin|padding):([^;]+)([^;]+)\2;/g, '$1:$2$3;');
    }
    
    // ç©ºã®ãƒ«ãƒ¼ãƒ«ã‚’å‰Šé™¤
    if (removeEmpty) {
      result = result.replace(/[^{}]+\{\s*\}/g, '');
    }
    
    // æœ€å¾Œã®ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚’å‰Šé™¤
    result = result.replace(/;\}/g, '}');
    
    // å…ˆé ­ã¨æœ«å°¾ã®ç©ºç™½ã‚’å‰Šé™¤
    result = result.trim();
    
    return result;
  }
  
  function compressCSS() {
    const inputCSS = cssInput.value.trim();
    if (!inputCSS) {
      showMessage(cssOutput, 'åœ§ç¸®ã™ã‚‹CSSã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
      return;
    }
    
    try {
      const level = parseInt(compressionLevel.value);
      const options = {
        level: level,
        keepBreaks: keepBreaks.checked,
        removeComments: removeComments.checked,
        removeEmpty: removeEmpty.checked
      };
      
      const compressedCSS = minifyCSS(inputCSS, options);
      
      cssOutput.value = compressedCSS;
      updateStats(inputCSS, compressedCSS);
      showMessage(cssOutput, 'CSSåœ§ç¸®ãŒå®Œäº†ã—ã¾ã—ãŸ');
      trackToolEvent('css-compressor', 'compress', inputCSS.length);
      
    } catch (error) {
      showMessage(cssOutput, 'CSSåœ§ç¸®ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message, 'error');
      console.error('CSS compression error:', error);
    }
  }

  function copyCSSResult() {
    if (!cssOutput.value) {
      showMessage(cssOutput, 'ã‚³ãƒ”ãƒ¼ã™ã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“', 'error');
      return;
    }
    
    cssOutput.select();
    cssOutput.setSelectionRange(0, 99999);
    
    try {
      document.execCommand('copy');
      showMessage(cssOutput, 'åœ§ç¸®ã•ã‚ŒãŸCSSã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
      trackToolEvent('css-compressor', 'copy_result', cssOutput.value.length);
    } catch (err) {
      // ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ
      if (navigator.clipboard) {
        navigator.clipboard.writeText(cssOutput.value).then(() => {
          showMessage(cssOutput, 'åœ§ç¸®ã•ã‚ŒãŸCSSã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
          trackToolEvent('css-compressor', 'copy_result', cssOutput.value.length);
        }).catch(() => {
          showMessage(cssOutput, 'ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
        });
      } else {
        showMessage(cssOutput, 'ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
      }
    }
  }

  function downloadCSS() {
    if (!cssOutput.value) {
      showMessage(cssOutput, 'ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“', 'error');
      return;
    }
    
    const blob = new Blob([cssOutput.value], { type: 'text/css' });
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `compressed_${Date.now()}.css`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
    
    showMessage(cssOutput, 'CSSãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ');
    trackToolEvent('css-compressor', 'download', cssOutput.value.length);
  }

  // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
  compressBtn.addEventListener('click', compressCSS);
  copyResultBtn.addEventListener('click', copyCSSResult);
  downloadBtn.addEventListener('click', downloadCSS);
  
  clearInputBtn.addEventListener('click', function() {
    cssInput.value = '';
    updateStats('', '');
    showMessage(cssInput, 'å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
    trackToolEvent('css-compressor', 'clear_input');
    cssInput.focus();
  });
  
  clearResultBtn.addEventListener('click', function() {
    cssOutput.value = '';
    updateStats('', '');
    showMessage(cssOutput, 'çµæœã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
    trackToolEvent('css-compressor', 'clear_result');
  });

  // Ctrl+Enterã§åœ§ç¸®å®Ÿè¡Œ
  cssInput.addEventListener('keydown', function(e) {
    if (e.ctrlKey && e.key === 'Enter') {
      compressCSS();
    }
  });

  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¤‰æ›´æ™‚ã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
  compressionLevel.addEventListener('change', function() {
    trackToolEvent('css-compressor', 'change_level', parseInt(this.value));
  });
  
  keepBreaks.addEventListener('change', function() {
    trackToolEvent('css-compressor', 'toggle_breaks', this.checked ? 1 : 0);
  });
  
  removeComments.addEventListener('change', function() {
    trackToolEvent('css-compressor', 'toggle_comments', this.checked ? 1 : 0);
  });
  
  removeEmpty.addEventListener('change', function() {
    trackToolEvent('css-compressor', 'toggle_empty', this.checked ? 1 : 0);
  });

  // åˆæœŸçµ±è¨ˆè¡¨ç¤º
  updateStats('', '');
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å¾Œã®åˆæœŸåŒ–
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initCSSCompressor);
} else {
  initCSSCompressor();
}
</script>

<style>
.css-compressor {
  max-width: none;
  margin: 0;
}

.tool-section {
  margin-bottom: 30px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.tool-section h3 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #333;
  font-size: 18px;
}

.tool-section textarea {
  width: 100%;
  padding: 12px;
  border: 2px solid #ddd;
  border-radius: 4px;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 14px;
  line-height: 1.5;
  resize: vertical;
  box-sizing: border-box;
  margin-bottom: 15px;
}

.tool-section textarea:focus {
  outline: none;
  border-color: #007acc;
}

.tool-section textarea[readonly] {
  background-color: #f8f9fa;
  color: #333;
}

.button-group {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.btn {
  padding: 12px 24px;
  background: #6c757d;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: background-color 0.2s ease;
}

.btn-primary {
  background: #007acc;
}

.btn:hover {
  opacity: 0.8;
}

.btn:active {
  transform: translateY(1px);
}

.options-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-bottom: 0;
}

.option-item label {
  display: block;
  font-weight: 600;
  color: #555;
  margin-bottom: 5px;
}

.option-item select {
  width: 100%;
  padding: 8px;
  border: 2px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
  background: white;
}

.option-item input[type="checkbox"] {
  margin-right: 8px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 15px;
}

.stat-item {
  background: white;
  padding: 15px;
  border-radius: 6px;
  border: 1px solid #ddd;
  text-align: center;
  transition: background-color 0.2s ease;
}

.stat-item:hover {
  background: #f8f9fa;
}

.stat-label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: #666;
  margin-bottom: 5px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stat-value {
  display: block;
  font-size: 20px;
  font-weight: bold;
  color: #333;
}

.info-section {
  background: #e7f3ff;
  padding: 20px;
  border-radius: 8px;
  border-left: 4px solid #007acc;
}

.info-section h4 {
  margin-top: 0;
  color: #333;
}

.css-info ul {
  margin: 10px 0;
  padding-left: 20px;
}

.css-info li {
  margin: 5px 0;
}

.success {
  color: #155724;
  background: #d4edda;
  padding: 10px;
  border-radius: 4px;
  margin-top: 10px;
}

.error {
  color: #721c24;
  background: #f8d7da;
  padding: 10px;
  border-radius: 4px;
  margin-top: 10px;
}

@media (max-width: 768px) {
  .options-grid,
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .button-group {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
  }
}
</style>
