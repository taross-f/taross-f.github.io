---
layout: page
title: JSONæ•´å½¢ãƒ„ãƒ¼ãƒ«
title_i18n_key: apps.json_formatter.title
permalink: /json-formatter/
---

<nav class="breadcrumb" aria-label="breadcrumb">
  <ol>
    <li><a href="/" data-i18n="nav.home">ãƒ›ãƒ¼ãƒ </a></li>
    <li><a href="/apps/" data-i18n="nav.apps">Apps</a></li>
    <li class="active" data-i18n="apps.json_formatter.title">JSONæ•´å½¢ãƒ„ãƒ¼ãƒ«</li>
  </ol>
</nav>

<div class="json-formatter">
  <div class="tool-section">
    <h3 data-i18n="apps.json_formatter.input_section">ğŸ“ JSONå…¥åŠ›</h3>
    <textarea id="jsonInput" data-i18n-placeholder="apps.json_formatter.input_placeholder" placeholder='{"name": "example", "data": [1, 2, 3]}' rows="12"></textarea>
    <div class="button-group">
      <button id="formatBtn" class="btn btn-primary" data-i18n="apps.json_formatter.format_btn">æ•´å½¢</button>
      <button id="minifyBtn" class="btn btn-secondary" data-i18n="apps.json_formatter.minify_btn">åœ§ç¸®</button>
      <button id="validateBtn" class="btn btn-info" data-i18n="apps.json_formatter.validate_btn">æ¤œè¨¼</button>
      <button id="clearInputBtn" class="btn" data-i18n="common.clear">ã‚¯ãƒªã‚¢</button>
    </div>
  </div>
  
  <div class="tool-section">
    <h3 data-i18n="apps.json_formatter.output_section">ğŸ“‹ æ•´å½¢çµæœ</h3>
    <textarea id="jsonOutput" data-i18n-placeholder="apps.json_formatter.output_placeholder" placeholder="æ•´å½¢ã•ã‚ŒãŸJSONãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™..." rows="12" readonly></textarea>
    <div class="button-group">
      <button id="copyOutputBtn" class="btn" data-i18n="apps.json_formatter.copy_output">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
      <button id="clearOutputBtn" class="btn" data-i18n="apps.json_formatter.clear_output">çµæœã‚’ã‚¯ãƒªã‚¢</button>
    </div>
  </div>
  
  <div class="stats-section">
    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-label" data-i18n="apps.json_formatter.original_size">æ–‡å­—æ•°ï¼ˆå…ƒï¼‰</span>
        <span class="stat-value" id="originalSize">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label" data-i18n="apps.json_formatter.formatted_size">æ–‡å­—æ•°ï¼ˆæ•´å½¢å¾Œï¼‰</span>
        <span class="stat-value" id="formattedSize">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label" data-i18n="apps.json_formatter.compression_ratio">åœ§ç¸®ç‡</span>
        <span class="stat-value" id="compressionRatio">0%</span>
      </div>
      <div class="stat-item">
        <span class="stat-label" data-i18n="apps.json_formatter.nesting_level">ãƒã‚¹ãƒˆãƒ¬ãƒ™ãƒ«</span>
        <span class="stat-value" id="nestingLevel">0</span>
      </div>
    </div>
  </div>
  
  <div class="tool-section">
    <h3 data-i18n="apps.json_formatter.search_section">ğŸ” JSONãƒ‘ã‚¹æ¤œç´¢</h3>
    <input type="text" id="jsonPathInput" data-i18n-placeholder="apps.json_formatter.search_placeholder" placeholder="ä¾‹: $.data[0], $.name ãªã©" />
    <button id="searchPathBtn" class="btn btn-info" data-i18n="apps.json_formatter.search_btn">æ¤œç´¢</button>
    <div id="pathResult"></div>
  </div>
  
  <div class="info-section">
    <h4 data-i18n="apps.json_formatter.about_title">ğŸ’¡ JSONã«ã¤ã„ã¦</h4>
    <p data-i18n="apps.json_formatter.about_text">JSONï¼ˆJavaScript Object Notationï¼‰ã¯ã€è»½é‡ãªãƒ‡ãƒ¼ã‚¿äº¤æ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã™ã€‚ä¸»ãªç”¨é€”ï¼š</p>
    <ul class="use-cases-list">
      <li data-i18n="apps.json_formatter.use_cases.0">Web APIã§ã®ãƒ‡ãƒ¼ã‚¿äº¤æ›</li>
      <li data-i18n="apps.json_formatter.use_cases.1">è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜</li>
      <li data-i18n="apps.json_formatter.use_cases.2">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã®æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ä¿å­˜</li>
      <li data-i18n="apps.json_formatter.use_cases.3">JavaScriptã§ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¡¨ç¾</li>
    </ul>
    <p><strong data-i18n="apps.json_formatter.shortcuts">ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ: Ctrl+Enter ã§æ•´å½¢ã€Ctrl+Shift+Enter ã§åœ§ç¸®</strong></p>
  </div>
</div>

<style>
.json-formatter {
  max-width: 100%;
  margin: 0 auto;
}

.tool-section {
  margin-bottom: 30px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.tool-section h3 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #333;
  font-size: 18px;
}

.tool-section textarea {
  width: 100%;
  padding: 12px;
  border: 2px solid #ddd;
  border-radius: 4px;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 14px;
  line-height: 1.5;
  resize: vertical;
  box-sizing: border-box;
  margin-bottom: 15px;
}

.tool-section textarea:focus {
  outline: none;
  border-color: #007acc;
}

.tool-section textarea[readonly] {
  background-color: #f8f9fa;
  color: #333;
}

.tool-section input[type="text"] {
  width: calc(100% - 80px);
  padding: 10px;
  border: 2px solid #ddd;
  border-radius: 4px;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 14px;
  margin-right: 10px;
  box-sizing: border-box;
}

.button-group {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
}

.btn {
  padding: 10px 20px;
  background: #6c757d;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: background-color 0.2s ease;
}

.btn-primary {
  background: #007acc;
}

.btn-secondary {
  background: #6c757d;
}

.btn-info {
  background: #17a2b8;
}

.btn:hover {
  opacity: 0.8;
}

.btn:active {
  transform: translateY(1px);
}

.stats-section {
  margin-bottom: 30px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
}

.stat-item {
  background: #e7f3ff;
  padding: 15px;
  border-radius: 6px;
  border: 1px solid #b3d9ff;
  text-align: center;
}

.stat-label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: #666;
  margin-bottom: 5px;
  text-transform: uppercase;
}

.stat-value {
  display: block;
  font-size: 24px;
  font-weight: bold;
  color: #007acc;
}

.info-section {
  background: #e7f3ff;
  padding: 20px;
  border-radius: 8px;
  border-left: 4px solid #007acc;
}

.info-section h4 {
  margin-top: 0;
  color: #333;
}

.error {
  color: #dc3545;
  background: #f8d7da;
  padding: 10px;
  border-radius: 4px;
  margin-top: 10px;
}

.success {
  color: #155724;
  background: #d4edda;
  padding: 10px;
  border-radius: 4px;
  margin-top: 10px;
}

#pathResult {
  margin-top: 15px;
  padding: 10px;
  background: #f8f9fa;
  border-radius: 4px;
  border: 1px solid #ddd;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 14px;
  min-height: 20px;
}

@media (max-width: 768px) {
  .button-group {
    flex-direction: column;
  }
  
  .btn {
    width: 100%;
  }
  
  .tool-section input[type="text"] {
    width: 100%;
    margin-bottom: 10px;
    margin-right: 0;
  }
  
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
</style>

<script>
(function() {
  const jsonInput = document.getElementById('jsonInput');
  const jsonOutput = document.getElementById('jsonOutput');
  const jsonPathInput = document.getElementById('jsonPathInput');
  const pathResult = document.getElementById('pathResult');
  const formatBtn = document.getElementById('formatBtn');
  const minifyBtn = document.getElementById('minifyBtn');
  const validateBtn = document.getElementById('validateBtn');
  const copyOutputBtn = document.getElementById('copyOutputBtn');
  const clearInputBtn = document.getElementById('clearInputBtn');
  const clearOutputBtn = document.getElementById('clearOutputBtn');
  const searchPathBtn = document.getElementById('searchPathBtn');
  const originalSize = document.getElementById('originalSize');
  const formattedSize = document.getElementById('formattedSize');
  const compressionRatio = document.getElementById('compressionRatio');
  const nestingLevel = document.getElementById('nestingLevel');

  function showMessage(element, message, type = 'success') {
    const existingMsg = element.parentNode.querySelector('.error, .success');
    if (existingMsg) {
      existingMsg.remove();
    }
    
    const msgDiv = document.createElement('div');
    msgDiv.className = type;
    msgDiv.textContent = message;
    element.parentNode.appendChild(msgDiv);
    
    setTimeout(() => {
      if (msgDiv.parentNode) {
        msgDiv.remove();
      }
    }, 3000);
  }

  function updateStats(original, formatted) {
    originalSize.textContent = original.length;
    formattedSize.textContent = formatted.length;
    
    const ratio = original.length > 0 ? 
      Math.round((1 - formatted.length / original.length) * 100) : 0;
    compressionRatio.textContent = ratio + '%';
    
    try {
      const obj = JSON.parse(original);
      nestingLevel.textContent = getMaxDepth(obj);
    } catch (e) {
      nestingLevel.textContent = '0';
    }
  }

  function getMaxDepth(obj) {
    if (typeof obj !== 'object' || obj === null) {
      return 0;
    }
    
    let maxDepth = 0;
    for (let key in obj) {
      if (obj.hasOwnProperty(key)) {
        const depth = getMaxDepth(obj[key]);
        maxDepth = Math.max(maxDepth, depth);
      }
    }
    return maxDepth + 1;
  }

  function formatJSON() {
    const input = jsonInput.value.trim();
    if (!input) {
      showMessage(jsonOutput, 'æ•´å½¢ã™ã‚‹JSONã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
      return;
    }

    try {
      const parsed = JSON.parse(input);
      const formatted = JSON.stringify(parsed, null, 2);
      jsonOutput.value = formatted;
      updateStats(input, formatted);
      showMessage(jsonOutput, 'JSONã®æ•´å½¢ãŒå®Œäº†ã—ã¾ã—ãŸ');
      trackToolEvent('json-formatter', 'format', input.length);
    } catch (error) {
      showMessage(jsonOutput, 'JSONæ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ' + error.message, 'error');
    }
  }

  function minifyJSON() {
    const input = jsonInput.value.trim();
    if (!input) {
      showMessage(jsonOutput, 'åœ§ç¸®ã™ã‚‹JSONã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
      return;
    }

    try {
      const parsed = JSON.parse(input);
      const minified = JSON.stringify(parsed);
      jsonOutput.value = minified;
      updateStats(input, minified);
      showMessage(jsonOutput, 'JSONã®åœ§ç¸®ãŒå®Œäº†ã—ã¾ã—ãŸ');
      trackToolEvent('json-formatter', 'minify', input.length);
    } catch (error) {
      showMessage(jsonOutput, 'JSONæ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ' + error.message, 'error');
    }
  }

  function validateJSON() {
    const input = jsonInput.value.trim();
    if (!input) {
      showMessage(jsonOutput, 'æ¤œè¨¼ã™ã‚‹JSONã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
      return;
    }

    try {
      JSON.parse(input);
      showMessage(jsonOutput, 'âœ… JSONã¯æœ‰åŠ¹ã§ã™');
      trackToolEvent('json-formatter', 'validate', input.length);
    } catch (error) {
      showMessage(jsonOutput, 'âŒ JSONæ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ' + error.message, 'error');
    }
  }

  function searchJSONPath() {
    const input = jsonInput.value.trim();
    const path = jsonPathInput.value.trim();
    
    if (!input || !path) {
      pathResult.textContent = 'JSONã¨ãƒ‘ã‚¹ã®ä¸¡æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„';
      return;
    }

    try {
      const parsed = JSON.parse(input);
      const result = evaluateJSONPath(parsed, path);
      pathResult.textContent = JSON.stringify(result, null, 2);
    } catch (error) {
      pathResult.textContent = 'ã‚¨ãƒ©ãƒ¼: ' + error.message;
    }
  }

  function evaluateJSONPath(obj, path) {
    // ç°¡å˜ãªJSONPathå®Ÿè£…ï¼ˆ$.key, $.array[0] ãªã©ï¼‰
    if (path.startsWith('$.')) {
      path = path.substring(2);
    }
    
    const parts = path.split(/[.\[\]]/).filter(p => p !== '');
    let current = obj;
    
    for (let part of parts) {
      if (part === '') continue;
      
      if (Array.isArray(current) && !isNaN(part)) {
        current = current[parseInt(part)];
      } else if (typeof current === 'object' && current !== null) {
        current = current[part];
      } else {
        throw new Error('ãƒ‘ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ' + part);
      }
      
      if (current === undefined) {
        throw new Error('ãƒ‘ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
      }
    }
    
    return current;
  }

  // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
  formatBtn.addEventListener('click', formatJSON);
  minifyBtn.addEventListener('click', minifyJSON);
  validateBtn.addEventListener('click', validateJSON);
  searchPathBtn.addEventListener('click', searchJSONPath);

  copyOutputBtn.addEventListener('click', function() {
    if (!jsonOutput.value) {
      showMessage(jsonOutput, 'ã‚³ãƒ”ãƒ¼ã™ã‚‹çµæœãŒã‚ã‚Šã¾ã›ã‚“', 'error');
      return;
    }
    
    jsonOutput.select();
    jsonOutput.setSelectionRange(0, 99999);
    
    try {
      document.execCommand('copy');
      showMessage(jsonOutput, 'çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
      trackToolEvent('json-formatter', 'copy_result');
    } catch (err) {
      showMessage(jsonOutput, 'ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
    }
  });

  clearInputBtn.addEventListener('click', function() {
    jsonInput.value = '';
    jsonInput.focus();
    trackToolEvent('json-formatter', 'clear_input');
  });

  clearOutputBtn.addEventListener('click', function() {
    jsonOutput.value = '';
    updateStats('', '');
    trackToolEvent('json-formatter', 'clear_output');
  });

  // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
  jsonInput.addEventListener('keydown', function(e) {
    if (e.ctrlKey && e.key === 'Enter') {
      e.preventDefault();
      if (e.shiftKey) {
        minifyJSON();
      } else {
        formatJSON();
      }
    }
  });

  jsonPathInput.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
      searchJSONPath();
    }
  });

  // åˆæœŸåŒ–
  updateStats('', '');
})();
</script>